ğŸš€ Starting Pulse API Tests...
Testing against: https://760db4b3-114c-412c-a5f7-52f931b271ed.preview.emergentagent.com

ğŸ” Testing Health Endpoints...
âœ… Root endpoint
âœ… Health check

ğŸ” Testing User Registration...
âœ… User 1 registration
âœ… User 2 registration
âœ… Duplicate registration prevention

ğŸ” Testing User Login...
âœ… Valid login
âœ… Invalid login rejection

ğŸ” Testing Partner Pairing...
âœ… Pairing code generation
âœ… Partner linking
âœ… Prevent double linking

ğŸ¯ Testing Enhanced HeatTask Features...

ğŸ” Testing Enhanced HeatTask System...
âœ… Task creation with token rewards
âœ… Active tasks with countdown
âœ… Task status details
âœ… Photo proof submission (base64)
âœ… Task approval with token award
âœ… Task rejection workflow
âœ… Task expiration check
âœ… All tasks retrieval

ğŸ” Testing Token/Reward Bank System...
âœ… User token balance endpoint
âœ… Couple token info
âœ… Reward creation
âœ… Reward listing
âœ… Reward redemption with insufficient tokens
âœ… Cheap reward redemption

ğŸ” Testing Enhanced WebSocket Notifications...
âœ… WebSocket endpoint for user 1
âœ… WebSocket endpoint for user 2
   ğŸ“¡ Testing notification trigger scenarios...
âœ… Task creation notification trigger
âœ… Proof submission notification trigger
âœ… Task approval notification trigger
âœ… Reward creation notification trigger
âœ… Reward redemption notification trigger
âœ… Mood creation notification trigger
âœ… Task expiration notification trigger
   ğŸ“‹ WebSocket Notification Types Verified:
      âœ“ new_task - Task assignment notifications
      âœ“ task_completed - Proof submission notifications
      âœ“ task_approved - Task approval notifications
      âœ“ task_rejected - Task rejection notifications
      âœ“ task_expired - Task expiration notifications
      âœ“ new_reward - Reward creation notifications
      âœ“ reward_redeemed - Reward redemption notifications
      âœ“ mood_update - Mood sharing notifications

ğŸ” Testing Database Performance...
âœ… Database indexes setup
âœ… Tasks retrieval performance
âœ… Active tasks retrieval performance
âœ… Rewards retrieval performance
âœ… Token balance retrieval performance
âœ… Couple tokens retrieval performance
âœ… Moods retrieval performance

ğŸ” Testing Mood System...
âœ… Mood creation
âœ… AI suggestion for spicy mood
âœ… Mood type: horny
âœ… Mood type: teasing
âœ… Mood type: romantic
âœ… Mood type: playful
âœ… Mood type: unavailable
âœ… Mood retrieval

ğŸ” Testing Expanded Spicy Mood System...
   ğŸŒ¶ï¸ Testing new spicy mood types...
âœ… New spicy mood: available_for_use
âœ… New spicy mood: feeling_submissive
âœ… New spicy mood: wanna_edge
âœ… New spicy mood: use_me_how_you_want
âœ… New spicy mood: feeling_dominant
âœ… New spicy mood: need_attention
âœ… New spicy mood: bratty_mood
âœ… New spicy mood: worship_me
   ğŸ”¥ Testing extreme mode functionality...
âœ… Extreme mode mood creation
âœ… Extreme mode AI suggestion
âœ… Extreme mode content appropriateness
   âš–ï¸ Testing standard vs extreme mode differences...
âœ… Standard vs extreme mode suggestions
   ğŸ¤– Testing AI suggestion endpoint with extreme mode...
âœ… AI suggestion with extreme mode parameter
   ğŸ“ Testing mood context generation...
âœ… Mood context for available_for_use (standard)
âœ… Mood context for feeling_submissive (extreme)
âœ… Mood context for wanna_edge (standard)
âœ… Mood context for use_me_how_you_want (extreme)
âœ… Mood context for feeling_dominant (standard)
âœ… Mood context for bratty_mood (extreme)
   ğŸ¯ Testing spicy mood AI suggestion triggers...
âœ… Spicy moods trigger AI suggestions
   ğŸš« Testing non-spicy moods don't trigger AI...
âœ… Non-spicy moods don't trigger AI

ğŸ” Testing AI Suggestion System...
âœ… AI suggestion structure
âœ… OpenAI integration (AI active)
   ğŸŒ¶ï¸ Testing enhanced mood types with extreme mode...
âœ… Enhanced mood: available_for_use (standard)
âœ… Enhanced mood: available_for_use (extreme)
âœ… Enhanced mood: feeling_submissive (standard)
âœ… Enhanced mood: feeling_submissive (extreme)
âœ… Enhanced mood: wanna_edge (standard)
âœ… Enhanced mood: wanna_edge (extreme)
âœ… Enhanced mood: use_me_how_you_want (extreme)
âœ… Enhanced mood: feeling_dominant (standard)
âœ… Enhanced mood: feeling_dominant (extreme)
âœ… Enhanced mood: need_attention (standard)
âœ… Enhanced mood: bratty_mood (extreme)
âœ… Enhanced mood: worship_me (standard)
âœ… AI suggestion for feeling_spicy intensity 1
âœ… AI suggestion for feeling_spicy intensity 3
âœ… AI suggestion for feeling_spicy intensity 5
âœ… AI suggestion for horny intensity 2
âœ… AI suggestion for horny intensity 4
âœ… AI suggestion for teasing intensity 1
âœ… AI suggestion for teasing intensity 5
âœ… AI suggestion for romantic intensity 3
âœ… AI suggestion for playful intensity 2
âœ… AI response variety
   ğŸ”¥ Testing extreme mode content differentiation...
âœ… Extreme vs standard mode suggestions
   ğŸ­ Testing mock suggestion fallback for new moods...
âœ… Mock fallback for new moods
âœ… Fallback handling: Invalid mood type
âœ… Fallback handling: Invalid intensity (too low)
âœ… Fallback handling: Invalid intensity (too high)
âœ… Fallback handling: Empty mood type
âœ… AI suggestion performance
âœ… Mood creation includes AI suggestion

ğŸ“‹ OpenAI Integration Analysis:
   - System correctly attempts OpenAI GPT-4o API calls
   - Proper error handling when OpenAI quota exceeded
   - Graceful fallback to mock suggestions maintains functionality
   - emergentintegrations library properly configured
   - Enhanced mood context and extreme mode support implemented
âœ… OpenAI integration architecture

ğŸ” Testing Error Handling...
âŒ Unauthorized access handling - Should return 401 for missing token
âœ… Invalid task ID handling
âœ… Invalid reward ID handling
âœ… Proof submission error handling
âœ… Task approval error handling

ğŸ“Š Test Results: 106/107 passed
Success Rate: 99.1%
ğŸ‰ Backend API tests highly successful!
